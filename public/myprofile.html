<!DOCTYPE html>
<html lang="en">

<head>
    <title>My Profile</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="menu.css" />
    <script type="module" src="https://unpkg.com/ionicons@5.1.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule="" src="https://unpkg.com/ionicons@5.1.2/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="headerfooter.css" />
    <script src="../index.js" defer></script>

</head>
<header>
    <div>
        <a href="\index.html" style="float: right;">Sign out</a>
        </br>
        <b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WellnessWays</b>
        </br></br>
        <a class="hovernav" href="\menu.html">Menu calories</a>
        <a class="hovernav" href="\homepage.html">Home</a>
        <a class="hovernav" href="\bmi.html">BMI</a>
        <a class="hovernav" href="\myprofile.html">My profile</a>
    </div>
    </header>

<br>
<body>
    <h1>CSV Data Viewer</h1>
    <div id="data"></div>
    <!-- <script>
        fetch('users.csv', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
        })
        .then(response => response.json())
        .then(data => {
            console.log(data);
        })
        .catch(error => {
            console.error('Error fetching data:', error);
        });
        
    </script> -->
    <script>
        fetch('/myprofile', {
          method: 'POST' // Assuming the server expects a POST request for /myprofile
        })
        .then(response => response.json())
        .then(data => {
          if (data.user) {
            const username = data.user[0]; // Assuming username is the first element
            const dob = data.user[2];
            const weight = data.user[3];
            const height = data.user[4];
            const bmi = data.user[5];
      
            // Create table structure with inline styles
            const table = document.createElement('table');
            table.style.margin = '0 auto'; // Center the table horizontally
            table.style.borderCollapse = 'collapse'; // Remove space between cells
            table.style.width = '50%'; // Optional: Set table width
      
            const tableBody = document.createElement('tbody');
      
            // Create table header row
            const headerRow = document.createElement('tr');
            const headerCell1 = document.createElement('th');
            headerCell1.textContent = 'Detail';
            headerCell1.style.padding = '10px';
            headerCell1.style.textAlign = 'center'; // Add text-align: center;
            headerCell1.style.border = '1px solid #ddd';
            headerCell1.style.backgroundColor = '#ea4984'; // Light gray background for header
            const headerCell2 = document.createElement('th');
            headerCell2.textContent = 'Value';
            headerCell2.style.padding = '10px';
            headerCell2.style.textAlign = 'center'; // Add text-align: center;
            headerCell2.style.border = '1px solid #ddd';
            headerCell2.style.backgroundColor = '#ea4984';
            headerRow.appendChild(headerCell1);
            headerRow.appendChild(headerCell2);
            tableBody.appendChild(headerRow);
      
            // Create data rows
            const dataRows = [
              ['Username', username],
              ['DOB', dob],
              ['Weight', weight + ' kg'],
              ['Height', height + ' cm'],
              ['BMI', bmi],
            ];
      
            for (const rowData of dataRows) {
              const dataRow = document.createElement('tr');
              const dataCell1 = document.createElement('td');
              dataCell1.textContent = rowData[0];
              dataCell1.style.padding = '10px';
              dataCell1.style.textAlign = 'center'; // Add text-align: center;
              dataCell1.style.border = '1px solid #ddd';
              dataCell1.style.backgroundColor = 'rgba(255, 255, 255, 0.8)'; // White background with opacity for data cells
              const dataCell2 = document.createElement('td');
              dataCell2.textContent = rowData[1];
              dataCell2.style.padding = '10px';
              dataCell2.style.textAlign = 'center'; // Add text-align: center;
              dataCell2.style.border = '1px solid #ddd';
              dataCell2.style.backgroundColor = 'rgba(255, 255, 255, 0.8)';
              dataRow.appendChild(dataCell1);
              dataRow.appendChild(dataCell2);
              tableBody.appendChild(dataRow);
            }
      
            table.appendChild(tableBody);
            document.getElementById('data').innerHTML = ''; // Clear previous content
            document.getElementById('data').appendChild(table);
          } else {
            document.getElementById('data').innerHTML = 'You are not logged in.';
          }
        })
        .catch(error => {
          console.error('Error fetching user data:', error);
          document.getElementById('data').innerHTML = 'Error retrieving data.';
        });
      </script> </br>
</body>
    

<footer>
    makkasan &copy; CP456 Software Engineer
</footer>

</html>
